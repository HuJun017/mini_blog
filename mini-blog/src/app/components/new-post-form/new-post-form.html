<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card shadow">
      <div class="card-header bg-success text-white">
        <h2 class="card-title mb-0">
          <i class="fas fa-plus me-2"></i>
          {{ isEditMode ? 'Modifica Post' : 'Nuovo Post' }}
        </h2>
      </div>

      <div class="card-body">
        <form (ngSubmit)="onSubmit()" #postForm="ngForm">
          <!-- Titolo -->
          <div class="mb-3">
            <label for="title" class="form-label">
              <i class="fas fa-heading me-1"></i>Titolo *
            </label>
            <input
              type="text"
              id="title"
              name="title"
              class="form-control"
              [(ngModel)]="formPost.title"
              #title="ngModel"
              required
              minlength="3"
              placeholder="Inserisci il titolo del post"
              [class.is-invalid]="title.invalid && (title.dirty || title.touched)"
              [class.is-valid]="title.valid && (title.dirty || title.touched)">
            
            <div class="invalid-feedback" *ngIf="title.invalid && (title.dirty || title.touched)">
              <small *ngIf="title.errors?.['required']">Il titolo è obbligatorio</small>
              <small *ngIf="title.errors?.['minlength']">Il titolo deve essere di almeno 3 caratteri</small>
            </div>
          </div>

          <!-- Autore -->
          <div class="mb-3">
            <label for="author" class="form-label">
              <i class="fas fa-user me-1"></i>Autore *
            </label>
            <input
              type="text"
              id="author"
              name="author"
              class="form-control"
              [(ngModel)]="formPost.author"
              #author="ngModel"
              required
              minlength="2"
              placeholder="Nome dell'autore"
              [class.is-invalid]="author.invalid && (author.dirty || author.touched)"
              [class.is-valid]="author.valid && (author.dirty || author.touched)">
            
            <div class="invalid-feedback" *ngIf="author.invalid && (author.dirty || author.touched)">
              <small *ngIf="author.errors?.['required']">L'autore è obbligatorio</small>
              <small *ngIf="author.errors?.['minlength']">Il nome deve essere di almeno 2 caratteri</small>
            </div>
          </div>

          <!-- Categoria -->
          <div class="mb-3">
            <label for="category" class="form-label">
              <i class="fas fa-tag me-1"></i>Categoria *
            </label>
            <select
              id="category"
              name="category"
              class="form-select"
              [(ngModel)]="formPost.category"
              #category="ngModel"
              required
              [class.is-invalid]="category.invalid && (category.dirty || category.touched)"
              [class.is-valid]="category.valid && (category.dirty || category.touched)">
              <option value="">Seleziona una categoria</option>
              <option value="Tecnologia">Tecnologia</option>
              <option value="Programmazione">Programmazione</option>
              <option value="Design">Design</option>
              <option value="Qualità">Qualità</option>
              <option value="Tutorial">Tutorial</option>
              <option value="News">News</option>
              <option value="Altro">Altro</option>
            </select>
            
            <div class="invalid-feedback" *ngIf="category.invalid && (category.dirty || category.touched)">
              <small *ngIf="category.errors?.['required']">La categoria è obbligatoria</small>
            </div>
          </div>

          <!-- Data -->
          <div class="mb-3">
            <label for="date" class="form-label">
              <i class="fas fa-calendar me-1"></i>Data *
            </label>
            <input
              type="date"
              id="date"
              name="date"
              class="form-control"
              [(ngModel)]="formDateString"
              #date="ngModel"
              required
              [class.is-invalid]="date.invalid && (date.dirty || date.touched)"
              [class.is-valid]="date.valid && (date.dirty || date.touched)">
            
            <div class="invalid-feedback" *ngIf="date.invalid && (date.dirty || date.touched)">
              <small *ngIf="date.errors?.['required']">La data è obbligatoria</small>
            </div>
          </div>

          <!-- Contenuto -->
          <div class="mb-4">
            <label for="content" class="form-label">
              <i class="fas fa-align-left me-1"></i>Contenuto *
            </label>
            <textarea
              id="content"
              name="content"
              class="form-control"
              rows="8"
              [(ngModel)]="formPost.content"
              #content="ngModel"
              required
              minlength="10"
              placeholder="Scrivi qui il contenuto del post..."
              [class.is-invalid]="content.invalid && (content.dirty || content.touched)"
              [class.is-valid]="content.valid && (content.dirty || content.touched)"></textarea>
            
            <div class="invalid-feedback" *ngIf="content.invalid && (content.dirty || content.touched)">
              <small *ngIf="content.errors?.['required']">Il contenuto è obbligatorio</small>
              <small *ngIf="content.errors?.['minlength']">Il contenuto deve essere di almeno 10 caratteri</small>
            </div>
            
            <div class="form-text">
              <i class="fas fa-info-circle me-1"></i>
              Caratteri: {{ formPost.content?.length || 0 }}
            </div>
          </div>

          <!-- Pulsanti -->
          <div class="d-flex justify-content-between">
            <button type="button" (click)="goBack()" class="btn btn-secondary">
              <i class="fas fa-arrow-left me-1"></i>Annulla
            </button>
            
            <button
              type="submit"
              class="btn btn-success"
              [disabled]="postForm.invalid">
              <i class="fas fa-save me-1"></i>
              {{ isEditMode ? 'Aggiorna Post' : 'Salva Post' }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Anteprima -->
    <div class="card mt-4" *ngIf="formPost.title || formPost.content">
      <div class="card-header bg-info text-white">
        <h5 class="mb-0">
          <i class="fas fa-eye me-2"></i>Anteprima
        </h5>
      </div>
      <div class="card-body">
        <h4>{{ formPost.title || 'Titolo del post' }}</h4>
        <p class="text-muted">
          <small>
            <i class="fas fa-user me-1"></i>{{ formPost.author || 'Autore' }}
            <span class="badge bg-secondary ms-2">{{ formPost.category || 'Categoria' }}</span>
          </small>
        </p>
        <p>{{ formPost.content || 'Contenuto del post...' }}</p>
      </div>
    </div>
  </div>
</div>